var gdjs;(function(d){const S=new d.Logger("Tween");function T(i){return i.setScaleX&&i.setScaleY&&i.getScaleX&&i.getScaleY}function j(i){return i.setOpacity&&i.getOpacity}function u(i){return i.getZ&&i.setZ}function m(i){return i.setColor&&i.getColor}function O(i){return i.setCharacterSize&&i.getCharacterSize}const g=d.evtTools.common.lerp,h=d.evtTools.common.exponentialInterpolation,_=()=>{},p=i=>e=>i.setNumber(e),v=i=>e=>i.setX(e),C=i=>e=>i.setY(e),R=i=>u(i)?e=>i.setZ(e):()=>{},y=i=>([e,t])=>i.setPosition(e,t),P=i=>e=>i.setAngle(e),X=i=>e=>i.setWidth(e),Y=i=>e=>i.setHeight(e),D=i=>e=>i.setRotationX(e),H=i=>e=>i.setRotationY(e),B=i=>e=>i.setDepth(e),I=(i,e)=>e?([t,o])=>{const r=i.getCenterXInScene(),n=i.getCenterYInScene();i.setScaleX(t),i.setScaleY(o),i.setCenterPositionInScene(r,n)}:([t,o])=>{i.setScaleX(t),i.setScaleY(o)},x=(i,e,t)=>t?o=>{const r=i.getCenterXInScene(),n=i.getCenterYInScene(),a=e?e.getCenterZInScene():0;i.setScale(o),i.setCenterXInScene(r),i.setCenterYInScene(n),e&&e.setCenterZInScene(a)}:o=>i.setScale(o),M=(i,e)=>e?t=>{const o=i.getCenterXInScene();i.setScaleX(t),i.setCenterXInScene(o)}:t=>i.setScaleX(t),V=(i,e)=>e?t=>{const o=i.getCenterYInScene();i.setScaleY(t),i.setCenterYInScene(o)}:t=>i.setScaleY(t),F=i=>e=>i.setOpacity(e),N=i=>e=>i.setCharacterSize(e),A=(i,e)=>t=>{i.updateDoubleParameter(e,t)},k=(i,e)=>([t,o,r])=>{const n=d.evtTools.tween.hslToRgb(t,o,r);i.updateColorParameter(e,d.rgbToHexNumber(n[0],n[1],n[2]))},z=(i,e)=>e?([t,o,r])=>{const n=d.evtTools.tween.hslToRgb(t,o,r);i.setColor(Math.floor(n[0])+";"+Math.floor(n[1])+";"+Math.floor(n[2]))}:([t,o,r])=>{i.setColor(Math.floor(t)+";"+Math.floor(o)+";"+Math.floor(r))},Z=i=>([e,t,o])=>{const r=d.evtTools.tween.hslToRgb(e,t,o);i.setColor(Math.floor(r[0])+";"+Math.floor(r[1])+";"+Math.floor(r[2]))},E=i=>e=>{const t=e.type,o=e.variablePath,r=e.effectName,n=e.propertyName,a=!!e.scaleFromCenterOfObject,s=!!e.useHSLColorTransition;if(t==="objectValue")return _;if(t==="variable"&&o){const l=i.getVariables().getVariableFromPath(o);return l?p(l):()=>{}}if(t==="positionX")return v(i);if(t==="positionY")return C(i);if(t==="position")return y(i);if(t==="positionZ")return R(i);if(t==="width")return X(i);if(t==="height")return Y(i);if(t==="depth")return u(i)?B(i):()=>{};if(t==="angle")return P(i);if(t==="rotationX")return u(i)?D(i):()=>{};if(t==="rotationY")return u(i)?H(i):()=>{};if(t==="scale"){if(!T(i))return()=>{};const l=u(i)?i:null;return x(i,l,a)}if(t==="scaleXY")return T(i)?I(i,a):()=>{};if(t==="scaleX")return T(i)?M(i,a):()=>{};if(t==="scaleY")return T(i)?V(i,a):()=>{};if(t==="opacity")return j(i)?F(i):()=>{};if(t==="characterSize")return O(i)?N(i):()=>{};if(t==="numberEffectProperty"&&r&&n){const l=i.getRendererEffects()[r];return l||S.error(`The object "${i.name}" doesn't have any effect called "${r}"`),A(l,n)}if(t==="colorEffectProperty"&&r&&n){const l=i.getRendererEffects()[r];return l||S.error(`The object "${i.name}" doesn't have any effect called "${r}"`),k(l,n)}return t==="objectColor"?m(i)?z(i,s):()=>{}:t==="objectColorHSL"?m(i)?Z(i):()=>{}:()=>{}};class q extends d.RuntimeBehavior{constructor(e,t,o){super(e,t,o);this._tweens=new d.evtTools.tween.TweenManager;this._isActive=!0}applyBehaviorOverriding(e){return!0}getNetworkSyncData(e){return{...super.getNetworkSyncData(e),props:{tweenManager:this._tweens.getNetworkSyncData()}}}updateFromNetworkSyncData(e,t){super.updateFromNetworkSyncData(e,t),e.props.tweenManager&&this._tweens.updateFromNetworkSyncData(e.props.tweenManager,o=>this.owner,o=>E(this.owner)(o),o=>o.destroyObjectWhenFinished?()=>this._deleteFromScene():null)}doStepPreEvents(e){this._tweens.step()}_deleteFromScene(){this.owner.deleteFromScene()}addVariableTween(e,t,o,r,n,a,s){this._tweens.addSimpleTween(e,this.owner.getRuntimeScene(),a/1e3,n,g,o,r,p(t),{type:"variable",variable:t,destroyObjectWhenFinished:s},s?()=>this._deleteFromScene():null)}addVariableTween2(e,t,o,r,n,a){this._addVariableTween(e,t,o,r,n/1e3,a,this.owner.getRuntimeScene())}addVariableTween3(e,t,o,r,n,a){this._addVariableTween(e,t,o,r,n,a,this.owner)}_addVariableTween(e,t,o,r,n,a,s){t.getType()==="number"&&this._tweens.addSimpleTween(e,s,n,r,g,t.getValue(),o,p(t),{type:"variable",variable:t,destroyObjectWhenFinished:a},a?()=>this._deleteFromScene():null)}addValueTween(e,t,o,r,n,a,s){this._tweens.addSimpleTween(e,this.owner,n,r,a?h:g,t,o,_,{type:"objectValue",destroyObjectWhenFinished:s},s?()=>this._deleteFromScene():null)}addObjectPositionTween(e,t,o,r,n,a){this._addObjectPositionTween(e,t,o,r,n/1e3,a,this.owner.getRuntimeScene())}addObjectPositionTween2(e,t,o,r,n,a){this._addObjectPositionTween(e,t,o,r,n,a,this.owner)}_addObjectPositionTween(e,t,o,r,n,a,s){this._tweens.addMultiTween(e,s,n,r,g,[this.owner.getX(),this.owner.getY()],[t,o],y(this.owner),{type:"position",destroyObjectWhenFinished:a},a?()=>this._deleteFromScene():null)}addObjectPositionXTween(e,t,o,r,n){this._addObjectPositionXTween(e,t,o,r/1e3,n,this.owner.getRuntimeScene())}addObjectPositionXTween2(e,t,o,r,n){this._addObjectPositionXTween(e,t,o,r,n,this.owner)}_addObjectPositionXTween(e,t,o,r,n,a){this._tweens.addSimpleTween(e,a,r,o,g,this.owner.getX(),t,v(this.owner),{type:"positionX",destroyObjectWhenFinished:n},n?()=>this._deleteFromScene():null)}addObjectPositionYTween(e,t,o,r,n){this._addObjectPositionYTween(e,t,o,r/1e3,n,this.owner.getRuntimeScene())}addObjectPositionYTween2(e,t,o,r,n){this._addObjectPositionYTween(e,t,o,r,n,this.owner)}_addObjectPositionYTween(e,t,o,r,n,a){this._tweens.addSimpleTween(e,a,r,o,g,this.owner.getY(),t,C(this.owner),{type:"positionY",destroyObjectWhenFinished:n},n?()=>this._deleteFromScene():null)}addObjectPositionZTween(e,t,o,r,n){this._addObjectPositionZTween(e,t,o,r/1e3,n,this.owner.getRuntimeScene())}addObjectPositionZTween2(e,t,o,r,n,a){this._addObjectPositionZTween(t,o,r,n,a,this.owner)}_addObjectPositionZTween(e,t,o,r,n,a){const{owner:s}=this;!u(s)||this._tweens.addSimpleTween(e,a,r,o,g,s.getZ(),t,R(s),{type:"positionZ",destroyObjectWhenFinished:n},n?()=>this._deleteFromScene():null)}addObjectAngleTween(e,t,o,r,n){this._addObjectAngleTween(e,t,o,r/1e3,n,this.owner.getRuntimeScene())}addObjectAngleTween2(e,t,o,r,n){this._addObjectAngleTween(e,t,o,r,n,this.owner)}_addObjectAngleTween(e,t,o,r,n,a){this._tweens.addSimpleTween(e,a,r,o,g,this.owner.getAngle(),t,P(this.owner),{type:"angle",destroyObjectWhenFinished:n},n?()=>this._deleteFromScene():null)}addObjectRotationXTween(e,t,o,r,n,a){const{owner:s}=this;!u(s)||this._tweens.addSimpleTween(t,this.owner,n,r,g,s.getRotationX(),o,D(s),{type:"rotationX",destroyObjectWhenFinished:a},a?()=>this._deleteFromScene():null)}addObjectRotationYTween(e,t,o,r,n,a){const{owner:s}=this;!u(s)||this._tweens.addSimpleTween(t,this.owner,n,r,g,s.getRotationY(),o,H(s),{type:"rotationY",destroyObjectWhenFinished:a},a?()=>this._deleteFromScene():null)}addObjectScaleTween(e,t,o,r,n,a,s){this._addObjectScaleTween(e,t,o,r,n/1e3,a,s,this.owner.getRuntimeScene(),g)}addObjectScaleTween2(e,t,o,r,n,a,s){this._addObjectScaleTween(e,t,o,r,n,a,s,this.owner,h)}_addObjectScaleTween(e,t,o,r,n,a,s,l,c){const w=this.owner;!T(w)||(t<0&&(t=0),o<0&&(o=0),this._tweens.addMultiTween(e,l,n,r,c,[w.getScaleX(),w.getScaleY()],[t,o],I(w,s),{type:"scaleXY",destroyObjectWhenFinished:a},a?()=>this._deleteFromScene():null))}addObjectScaleTween3(e,t,o,r,n,a){this._addObjectScaleXTween(e,t,o,r,n,a,this.owner,h);const s=this.owner;if(!T(s))return;const l=u(s)?s:null;this._tweens.addSimpleTween(e,this.owner,r,o,h,s.getScale(),t,x(s,l,a),{type:"scale",scaleFromCenterOfObject:a,destroyObjectWhenFinished:n},n?()=>this._deleteFromScene():null)}addObjectScaleXTween(e,t,o,r,n,a){this._addObjectScaleXTween(e,t,o,r/1e3,n,a,this.owner.getRuntimeScene(),g)}addObjectScaleXTween2(e,t,o,r,n,a){this._addObjectScaleXTween(e,t,o,r,n,a,this.owner,h)}_addObjectScaleXTween(e,t,o,r,n,a,s,l){const c=this.owner;!T(c)||this._tweens.addSimpleTween(e,s,r,o,l,c.getScaleX(),t,M(c,a),{type:"scaleX",scaleFromCenterOfObject:a,destroyObjectWhenFinished:n},n?()=>this._deleteFromScene():null)}addObjectScaleYTween(e,t,o,r,n,a){this._addObjectScaleYTween(e,t,o,r/1e3,n,a,this.owner.getRuntimeScene(),g)}addObjectScaleYTween2(e,t,o,r,n,a){this._addObjectScaleYTween(e,t,o,r,n,a,this.owner,h)}_addObjectScaleYTween(e,t,o,r,n,a,s,l){const c=this.owner;!T(c)||this._tweens.addSimpleTween(e,s,r,o,l,c.getScaleY(),t,V(c,a),{type:"scaleY",scaleFromCenterOfObject:a,destroyObjectWhenFinished:n},n?()=>this._deleteFromScene():null)}addObjectOpacityTween(e,t,o,r,n){this._addObjectOpacityTween(e,t,o,r/1e3,n,this.owner.getRuntimeScene())}addObjectOpacityTween2(e,t,o,r,n){this._addObjectOpacityTween(e,t,o,r,n,this.owner)}_addObjectOpacityTween(e,t,o,r,n,a){const s=this.owner;!j(s)||this._tweens.addSimpleTween(e,a,r,o,g,s.getOpacity(),t,F(s),{type:"opacity",destroyObjectWhenFinished:n},n?()=>this._deleteFromScene():null)}addNumberEffectPropertyTween(e,t,o,r,n,a,s,l){const c=this.owner.getRendererEffects()[r];c||S.error(`The object "${this.owner.name}" doesn't have any effect called "${r}"`),this._tweens.addSimpleTween(t,this.owner,s,a,g,c?c.getDoubleParameter(n):0,o,A(c,n),{type:"numberEffectProperty",effectName:r,propertyName:n,destroyObjectWhenFinished:l},l?()=>this._deleteFromScene():null)}addColorEffectPropertyTween(e,t,o,r,n,a,s,l){const c=this.owner.getRendererEffects()[r];c||S.error(`The object "${this.owner.name}" doesn't have any effect called "${r}"`);const w=d.hexNumberToRGB(c?c.getColorParameter(n):0),b=d.rgbOrHexToRGBColor(o);this._tweens.addMultiTween(t,this.owner,s,a,g,d.evtTools.tween.rgbToHsl(w.r,w.g,w.b),d.evtTools.tween.rgbToHsl(b[0],b[1],b[2]),k(c,n),{type:"colorEffectProperty",effectName:r,propertyName:n,destroyObjectWhenFinished:l},l?()=>this._deleteFromScene():null)}addObjectColorTween(e,t,o,r,n,a){this._addObjectColorTween(e,t,o,r/1e3,n,a,this.owner.getRuntimeScene())}addObjectColorTween2(e,t,o,r,n,a=!0){this._addObjectColorTween(e,t,o,r,n,a,this.owner)}_addObjectColorTween(e,t,o,r,n,a,s){const l=this.owner;if(!m(l))return;const c=d.rgbOrHexToRGBColor(l.getColor()),w=d.rgbOrHexToRGBColor(t),b=a?d.evtTools.tween.rgbToHsl(c[0],c[1],c[2]):c,f=a?d.evtTools.tween.rgbToHsl(w[0],w[1],w[2]):w;this._tweens.addMultiTween(e,s,r,o,g,b,f,z(l,a),{type:"objectColor",useHSLColorTransition:a,destroyObjectWhenFinished:n},n?()=>this._deleteFromScene():null)}addObjectColorHSLTween(e,t,o,r,n,a,s,l){this._addObjectColorHSLTween(e,t,o,r,n,a,s/1e3,l,this.owner.getRuntimeScene())}addObjectColorHSLTween2(e,t,o,r,n,a,s,l){this._addObjectColorHSLTween(e,t,o,r,n,a,s,l,this.owner)}_addObjectColorHSLTween(e,t,o,r,n,a,s,l,c){if(!m(this.owner))return;const w=this.owner,b=d.rgbOrHexToRGBColor(w.getColor()),f=d.evtTools.tween.rgbToHsl(b[0],b[1],b[2]),L=o?t:f[0],$=r===-1?f[1]:Math.min(Math.max(r,0),100),G=n===-1?f[2]:Math.min(Math.max(n,0),100);this._tweens.addMultiTween(e,c,s,a,g,f,[L,$,G],Z(w),{type:"objectColorHSL",destroyObjectWhenFinished:l},l?()=>this._deleteFromScene():null)}addTextObjectCharacterSizeTween(e,t,o,r,n){this._addTextObjectCharacterSizeTween(e,t,o,r/1e3,n,this.owner.getRuntimeScene(),g)}addTextObjectCharacterSizeTween2(e,t,o,r,n){this._addTextObjectCharacterSizeTween(e,t,o,r,n,this.owner,h)}_addTextObjectCharacterSizeTween(e,t,o,r,n,a,s){const l=this.owner;!O(l)||this._tweens.addSimpleTween(e,a,r,o,s,l.getCharacterSize(),t,N(l),{type:"characterSize",destroyObjectWhenFinished:n},n?()=>this._deleteFromScene():null)}addObjectWidthTween(e,t,o,r,n){this._addObjectWidthTween(e,t,o,r/1e3,n,this.owner.getRuntimeScene())}addObjectWidthTween2(e,t,o,r,n){this._addObjectWidthTween(e,t,o,r,n,this.owner)}_addObjectWidthTween(e,t,o,r,n,a){this._tweens.addSimpleTween(e,a,r,o,g,this.owner.getWidth(),t,X(this.owner),{type:"width",destroyObjectWhenFinished:n},n?()=>this._deleteFromScene():null)}addObjectHeightTween(e,t,o,r,n){this._addObjectHeightTween(e,t,o,r/1e3,n,this.owner.getRuntimeScene())}addObjectHeightTween2(e,t,o,r,n){this._addObjectHeightTween(e,t,o,r,n,this.owner)}_addObjectHeightTween(e,t,o,r,n,a){this._tweens.addSimpleTween(e,a,r,o,g,this.owner.getHeight(),t,Y(this.owner),{type:"height",destroyObjectWhenFinished:n},n?()=>this._deleteFromScene():null)}addObjectDepthTween(e,t,o,r,n){this._addObjectDepthTween(e,t,o,r/1e3,n,this.owner.getRuntimeScene())}addObjectDepthTween2(e,t,o,r,n,a){this._addObjectDepthTween(t,o,r,n,a,this.owner)}_addObjectDepthTween(e,t,o,r,n,a){const{owner:s}=this;!u(s)||this._tweens.addSimpleTween(e,a,r,o,g,s.getDepth(),t,B(s),{type:"depth",destroyObjectWhenFinished:n},n?()=>this._deleteFromScene():null)}isPlaying(e){return this._tweens.isPlaying(e)}exists(e){return this._tweens.exists(e)}hasFinished(e){return this._tweens.hasFinished(e)}pauseTween(e){this._isActive&&this._tweens.pauseTween(e)}stopTween(e,t){this._isActive&&this._tweens.stopTween(e,t)}resumeTween(e){this._isActive&&this._tweens.resumeTween(e)}removeTween(e){this._tweens.removeTween(e)}getProgress(e){return this._tweens.getProgress(e)}getValue(e){return this._tweens.getValue(e)}onDeActivate(){this._isActive=!1}onActivate(){this._isActive=!0}}d.TweenRuntimeBehavior=q,d.registerBehavior("Tween::TweenBehavior",d.TweenRuntimeBehavior)})(gdjs||(gdjs={}));
//# sourceMappingURL=tweenruntimebehavior.js.map
